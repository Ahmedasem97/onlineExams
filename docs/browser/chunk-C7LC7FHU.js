import{a as U}from"./chunk-PEDA3D73.js";import{b as Q}from"./chunk-7QDF5YN4.js";import{a as j,b as z,c as B,d as Z,e as H,f as J}from"./chunk-QPTNXA66.js";import"./chunk-MVB7IIYG.js";import{b as D,c,d as k,e as R,f as S,g as f,h as V,i as N,j as G,l as q,m as I,n as O,o as K}from"./chunk-XQGFPIRA.js";import{c as $}from"./chunk-BCJBRAHD.js";import{g as L}from"./chunk-RWKLHVIC.js";import{s as T,t as A}from"./chunk-5XTQUXNF.js";import{$a as P,Ab as M,Bb as l,Cb as b,Fb as E,Ia as s,Ja as v,Ya as C,_a as o,cb as h,da as F,gb as n,hb as a,ib as p,ma as g,mb as x,na as w,nb as _,ob as d,wb as m}from"./chunk-XTK4EG3W.js";var Y=()=>({text:"email is required",error:"required"}),y=r=>[r],ee=()=>({text:"code is required",error:"required"}),W=()=>({text:"Password is required",error:"required"}),te=()=>({text:"At least one uppercase letter.",error:"pattern"}),re=()=>({text:"At least one lowercase letter.",error:"pattern"}),se=()=>({text:"At least one number.",error:"pattern"}),oe=()=>({text:"At least one special character.",error:"pattern"}),ie=()=>({text:"The text must be at least 8 characters long.",error:"pattern"}),ne=(r,u,e,t,i,X)=>[r,u,e,t,i,X];function ae(r,u){if(r&1){let e=x();n(0,"div",0)(1,"div",1)(2,"h1"),m(3,"Forgot your password?"),a(),n(4,"form",2),_("ngSubmit",function(){g(e);let i=d();return w(i.fogetPasswordSumbit())}),n(5,"div",3)(6,"div",4),p(7,"input",5)(8,"app-error-message",6)(9,"app-api-response-error",7),a(),p(10,"app-button",8),a()()()()}if(r&2){let e=d();s(4),o("formGroup",e.forgetPasswordForm),s(4),o("errorText",b(10,y,l(9,Y)))("formGroupErr",e.forgetPasswordForm)("formControlErr","email"),s(),o("apiResponeErr",e.errMessage),s(),P("disabled",e.isDisabled),o("text","Sign in")("classes","w-full")}}function le(r,u){if(r&1){let e=x();n(0,"div",0)(1,"div",1)(2,"h1"),m(3,"Verify code"),a(),n(4,"form",2),_("ngSubmit",function(){g(e);let i=d();return w(i.verifyCodeSumbit())}),n(5,"div",3)(6,"div",4),p(7,"input",9)(8,"app-error-message",6)(9,"app-api-response-error",7)(10,"app-api-response-error",10),n(11,"div",11)(12,"span"),m(13,"Didn\u2019t receive a code? "),n(14,"a",12),_("click",function(){g(e);let i=d();return w(i.ResendCode())}),m(15,"Resend"),a()()()(),p(16,"app-button",8),a()()()()}if(r&2){let e=d();s(4),o("formGroup",e.verifyCode),s(4),o("errorText",b(11,y,l(10,ee)))("formGroupErr",e.verifyCode)("formControlErr","resetCode"),s(),o("apiResponeErr",e.errMessage),s(),o("apiResponeSuccsse",e.succsesMessage),s(6),P("disabled",e.isDisabled),o("text","Verify")("classes","w-full")}}function pe(r,u){r&1&&(n(0,"div"),m(1,"Password is not matching"),a())}function de(r,u){r&1&&(n(0,"p-messages",15),C(1,pe,2,0,"ng-template",16),a())}function ce(r,u){if(r&1){let e=x();n(0,"div",0)(1,"div",1)(2,"h1"),m(3,"Set a Password"),a(),n(4,"form",2),_("ngSubmit",function(){g(e);let i=d();return w(i.setPasswordSumbit())}),n(5,"div",3)(6,"div",4),p(7,"p-password",13)(8,"app-error-message",6),a(),n(9,"div",4),p(10,"p-password",14)(11,"app-error-message",6),C(12,de,2,0,"p-messages",15),p(13,"app-api-response-error",7)(14,"app-api-response-error",10),a(),p(15,"app-button",8),a()()()()}if(r&2){let e,t=d();s(4),o("formGroup",t.setPassword),s(3),o("toggleMask",!0)("feedback",!1),s(),o("errorText",E(24,ne,l(18,W),l(19,te),l(20,re),l(21,se),l(22,oe),l(23,ie)))("formGroupErr",t.setPassword)("formControlErr","newPassword"),s(2),o("toggleMask",!0)("feedback",!1),s(),o("errorText",b(32,y,l(31,W)))("formGroupErr",t.setPassword)("formControlErr","rePassword"),s(),h(12,t.setPassword.getError("mismatch")&&((e=t.setPassword.get("rePassword"))!=null&&e.touched)?12:-1),s(),o("apiResponeErr",t.errMessage),s(),o("apiResponeSuccsse",t.succsesMessage),s(),P("disabled",t.isDisabled),o("text","Submit")("classes","w-full")}}var Ae=(()=>{class r{constructor(e,t,i){this._AuthLipService=e,this._Router=t,this._ToasterNgService=i,this.isDisabled=!1,this.step1=!0,this.step2=!1,this.step3=!1,this.forgetPasswordForm=new S({email:new f(null,[c.required])}),this.verifyCode=new S({resetCode:new f(null,[c.required])}),this.setPassword=new S({email:new f(null,[c.required]),newPassword:new f(null,[c.required,c.minLength(6),c.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]),rePassword:new f(null,[c.required])},this.confirmPassword)}fogetPasswordSumbit(){this.forgetPasswordForm.valid?(this.isDisabled=!0,this._AuthLipService.forgetPassword(this.forgetPasswordForm.value).subscribe({next:e=>{this._ToasterNgService.toasterSecsses(e.info),this.step1=!1,this.step2=!0,this.isDisabled=!1,this.errMessage="",console.log(e)},error:e=>{console.log(e),this.errMessage=e.error.message,this.isDisabled=!1}})):this.forgetPasswordForm.markAllAsTouched()}verifyCodeSumbit(){this.verifyCode.valid?(this.isDisabled=!0,this._AuthLipService.verifyResetCode(this.verifyCode.value).subscribe({next:e=>{this._ToasterNgService.toasterSecsses(e.status),this.step2=!1,this.step3=!0,this.errMessage="",this.succsesMessage="",this.isDisabled=!1,console.log(e)},error:e=>{console.log(e),this.errMessage=e.error.message,this.isDisabled=!1}})):this.verifyCode.markAllAsTouched()}ResendCode(){this._AuthLipService.forgetPassword(this.forgetPasswordForm.value).subscribe({next:e=>{this._ToasterNgService.toasterSecsses(e.info),this.succsesMessage=e.message,console.log(e)},error:e=>{console.log(e),this.errMessage=e.error.message,this.isDisabled=!1}})}confirmPassword(e){return e.get("newPassword")?.value===e.get("rePassword")?.value?null:{mismatch:!0}}setPasswordSumbit(){if(this.setPassword.get("newPassword")?.valid||this.setPassword.get("rePassword")?.valid){this.isDisabled=!0;let e={email:this.forgetPasswordForm.value.email,newPassword:this.setPassword.value.newPassword};this._AuthLipService.ResetPassword(e).subscribe({next:t=>{this._ToasterNgService.toasterSecsses(t.message),this.errMessage="",console.log(t),this.succsesMessage=t.message,this.isDisabled=!1,this._Router.navigate(["/auth/login"]),this.succsesMessage=t.message},error:t=>{console.log(t),console.log(t),this.errMessage=t.error.message,this.isDisabled=!1}})}else this.setPassword.markAllAsTouched()}static{this.\u0275fac=function(t){return new(t||r)(v(K),v(T),v(U))}}static{this.\u0275cmp=F({type:r,selectors:[["app-forget-password"]],standalone:!0,features:[M],decls:3,vars:3,consts:[[1,"container"],[1,"inner"],[3,"ngSubmit","formGroup"],[1,"gap-5","flex","flex-column"],[1,"card"],["pInputText","","formControlName","email","type","email","placeholder","Enter Email",1,"w-full"],[3,"errorText","formGroupErr","formControlErr"],[3,"apiResponeErr"],[3,"text","classes"],["pInputText","","formControlName","resetCode","type","text","placeholder","Enter the code",1,"w-full"],[3,"apiResponeSuccsse"],[1,"text-right","pt-3"],["routerLink","/auth/forgetPassword",3,"click"],["formControlName","newPassword","placeholder","Create new Password",3,"toggleMask","feedback"],["formControlName","rePassword","placeholder","Confirm Password",3,"toggleMask","feedback"],["severity","error"],["pTemplate",""]],template:function(t,i){t&1&&C(0,ae,11,12,"div",0)(1,le,17,13,"div",0)(2,ce,16,34,"div",0),t&2&&(h(0,i.step1?0:-1),s(),h(1,i.step2?1:-1),s(),h(2,i.step3?2:-1))},dependencies:[Q,L,A,z,j,Z,B,J,O,I,H,q,V,D,k,R,N,G,$],styles:["h1[_ngcontent-%COMP%]{font-size:24.78px;line-height:29.99px}input[_ngcontent-%COMP%]{box-shadow:0 10px 20px #4461f20d}.container[_ngcontent-%COMP%]{display:flex;justify-content:center}.inner[_ngcontent-%COMP%]{min-width:50%}a[_ngcontent-%COMP%]{color:var(--main-color);text-decoration:none;font-family:Poppins}  .p-password{display:block}  input{width:100%;background-color:#f9f9f9}.card[_ngcontent-%COMP%]{position:relative}"]})}}return r})();export{Ae as ForgetPasswordComponent};
